From f72f393cea2a0c7da857ae1aa9efa829de00f186 Mon Sep 17 00:00:00 2001
From: Scott K Logan <logans@cottsay.net>
Date: Wed, 10 Mar 2021 11:02:38 -0800
Subject: [PATCH] Drop Connext dependencies

This RMWs isn't available for RHEL.

Signed-off-by: Scott K Logan <logans@cottsay.net>
---
 package.xml          | 1 -
 rpm/template.spec.em | 4 ++++
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/package.xml b/package.xml
index e8037d7..3b3b809 100644
--- a/package.xml
+++ b/package.xml
@@ -18,7 +18,6 @@
   Bloom does not support group_depend so entries below duplicate the group rosidl_typesupport_cpp_packages.
   This ensures that binary packages have support for all of these rmw impl. enabled.
   -->
-  <build_depend>rosidl_typesupport_connext_cpp</build_depend>
   <build_depend>rosidl_typesupport_introspection_cpp</build_depend>
   <!-- end of group rosidl_typesupport_cpp_packages for bloom -->
 
diff --git a/rpm/template.spec.em b/rpm/template.spec.em
index d2872c6..2340247 100644
--- a/rpm/template.spec.em
+++ b/rpm/template.spec.em
@@ -1,3 +1,7 @@
+@{
+# Connext is not available for RHEL - ignore any deps related to it
+BuildDepends = [d for d in BuildDepends if 'connext' not in d]
+}@
 %bcond_without tests
 %bcond_without weak_deps
 
-- 
2.25.1

